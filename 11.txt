-- operator contains- podstawy

1.
CREATE TABLE CYTATY AS SELECT * FROM ZTPD.CYTATY;

2.
SELECT * 
FROM CYTATY
WHERE LOWER(CYTAT) LIKE '%optymista%' 
  AND LOWER(CYTAT) LIKE '%pesymista%';

3.
CREATE INDEX CTX_INDEKS_TEKST
ON CYTATY(TEKST)
INDEXTYPE IS CTXSYS.CONTEXT;

4.
SELECT * 
FROM CYTATY
WHERE CONTAINS(TEKST, 'optymista AND pesymista') > 0;

5.
SELECT * 
FROM CYTATY
WHERE CONTAINS(TEKST, 'pesymista AND NOT optymista') > 0;

6.
SELECT * 
FROM CYTATY
WHERE CONTAINS(TEKST, 'NEAR(optymista, pesymista, 3)') > 0;

7.
SELECT * 
FROM CYTATY
WHERE CONTAINS(TEKST, 'NEAR(optymista, pesymista, 10)') > 0;

8.
SELECT * 
FROM CYTATY
WHERE CONTAINS(TEKST, 'życi%') > 0;

9.
SELECT TEKST, SCORE(1) AS DOPASOWANIE
FROM CYTATY
WHERE CONTAINS(TEKST, 'życi%', 1) > 0
ORDER BY DOPASOWANIE DESC;

10.
SELECT TEKST, SCORE(1) AS DOPASOWANIE
FROM CYTATY
WHERE CONTAINS(TEKST, 'życi%', 1) > 0
AND ROWNUM = 1
ORDER BY DOPASOWANIE DESC;

11.
SELECT * 
FROM CYTATY
WHERE CONTAINS(TEKST, 'FUZZY(probelm)') > 0;

12.
INSERT INTO CYTATY (TEKST, AUTOR)
VALUES ('To smutne, że głupcy są tacy pewni siebie, a ludzie rozsądni tacy pełni wątpliwości.', 'Bertrand Russell');

COMMIT;

13.
Wynik zapytania jest pusty, ponieważ nowo dodany wiersz nie został jeszcze uwzględniony w indeksie pełnotekstowym.

14.
SELECT * 
FROM DR$CTX_INDEKS_TEKST$I
WHERE TOKEN_TEXT = 'głupcy';

15.
DROP INDEX CTX_INDEKS_TEKST;

CREATE INDEX CTX_INDEKS_TEKST
ON CYTATY(TEKST)
INDEXTYPE IS CTXSYS.CONTEXT;

16.
SELECT * 
FROM DR$CTX_INDEKS_TEKST$I
WHERE TOKEN_TEXT = 'głupcy';

SELECT * 
FROM CYTATY
WHERE CONTAINS(TEKST, 'głupcy') > 0;

17.
DROP INDEX CTX_INDEKS_TEKST;
DROP TABLE CYTATY;

-- Zaawansowane indeksowanie i wyszukiwanie

1.
CREATE TABLE QUOTES AS SELECT * FROM ZTPD.QUOTES;

2.
CREATE INDEX CTX_INDEKS_TEXT
ON QUOTES(TEXT)
INDEXTYPE IS CTXSYS.CONTEXT;

3.
SELECT * 
FROM QUOTES
WHERE CONTAINS(TEXT, 'work') > 0;

SELECT * 
FROM QUOTES
WHERE CONTAINS(TEXT, '$work') > 0;

SELECT * 
FROM QUOTES
WHERE CONTAINS(TEXT, 'working') > 0;

SELECT * 
FROM QUOTES
WHERE CONTAINS(TEXT, '$working') > 0;

4.
SELECT * 
FROM QUOTES
WHERE CONTAINS(TEXT, 'it') > 0;

Żadne słowo nie zostało odnalezione, najprawdopodobniej 'it' należy do którejś listy ze stop list.

5.
SELECT * 
FROM CTXSYS.CTX_STOPLISTS;

6.
SELECT * 
FROM CTXSYS.CTX_STOPWORDS
WHERE STOPLIST_NAME = 'DEFAULT_STOPLIST';

7.
DROP INDEX CTX_INDEKS_TEXT;

CREATE INDEX CTX_INDEKS_TEXT
ON QUOTES(TEXT)
INDEXTYPE IS CTXSYS.CONTEXT
PARAMETERS('STOPLIST CTXSYS.EMPTY_STOPLIST');

8.
SELECT * 
FROM QUOTES
WHERE CONTAINS(TEXT, 'it') > 0;

wyniki zostały znalezione

9.
SELECT * 
FROM QUOTES
WHERE CONTAINS(TEXT, 'fool AND humans') > 0;

10.
SELECT * 
FROM QUOTES
WHERE CONTAINS(TEXT, 'fool AND computer') > 0;

11.
SELECT * 
FROM QUOTES
WHERE CONTAINS(TEXT, 'fool WITHIN SENTENCE humans') > 0;

WITHIN SENTENCE nie jest obsługiwana, ponieważ indeks pełnotekstowy typu CONTEXT w Oracle Text nie domyślnie rozpoznaje granic zdań.

12.
DROP INDEX CTX_INDEKS_TEXT;

13.
BEGIN
 CTX_DDL.CREATE_SECTION_GROUP('NULLGROUP', 'NULL_SECTION_GROUP');
 CTX_DDL.ADD_SPECIAL_SECTION('NULLGROUP', 'SENTENCE');
 CTX_DDL.ADD_SPECIAL_SECTION('NULLGROUP', 'PARAGRAPH');
END;

14.
CREATE INDEX CTX_INDEKS_TEXT
ON QUOTES(TEXT)
INDEXTYPE IS CTXSYS.CONTEXT
PARAMETERS('SECTION GROUP NULLGROUP');

15.
SELECT * 
FROM QUOTES
WHERE CONTAINS(TEXT, 'fool WITHIN sentence humans') > 0;

SELECT * 
FROM QUOTES
WHERE CONTAINS(TEXT, 'fool WITHIN sentence computer') > 0;

16.
SELECT * 
FROM QUOTES
WHERE CONTAINS(TEXT, 'humans') > 0;

Oracle Text traktuje łącznik - jako separator i indeksuje zarówno „non” i „humans” jako oddzielne słowa

17.
DROP INDEX CTX_INDEKS_TEXT;

BEGIN
 CTX_DDL.CREATE_PREFERENCE('LEX_Z_M','BASIC_LEXER');
 CTX_DDL.SET_ATTRIBUTE('LEX_Z_M',
 'PRINTJOINS', '_-');
 CTX_DDL.SET_ATTRIBUTE ('LEX_Z_M',
 'INDEX_TEXT', 'YES');
END;

CREATE INDEX CTX_INDEKS_TEXT
ON QUOTES(TEXT)
INDEXTYPE IS CTXSYS.CONTEXT
PARAMETERS('LEXER LEX_Z_M');

18.
SELECT * 
FROM QUOTES
WHERE CONTAINS(TEXT, 'humans') > 0;

Nie zwrócił

19.
SELECT * 
FROM QUOTES
WHERE CONTAINS(TEXT, 'non\-humans') > 0;

20.
DROP TABLE QUOTES;

BEGIN
  CTX_DDL.DROP_PREFERENCE('LEX_Z_M');
  CTX_DDL.DROP_PREFERENCE('NULLGROUP');
END;
/



